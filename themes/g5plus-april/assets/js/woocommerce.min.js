var G5_Woocommerce=window.G5_Woocommerce||{};!function(t){"use strict";window.G5_Woocommerce=G5_Woocommerce;var a=t("body"),e=a.hasClass("gf-lazy-load"),i=a.hasClass("rtl");G5_Woocommerce={init:function(){this.initSwitchLayout(),this.processTabs(),this.updateAjaxPosts(),this.addToWishlist(),this.addToCart(),this.quickView(),this.addCartQuantity();var a=t("#single-product-image");this.singleProductImage(a),setTimeout(function(){G5_Woocommerce.setCartScrollBar()},500),this.saleCountdown(),this.yith_wcan_ajax_filtered()},initSwitchLayout:function(){var a=!1;t(document).on("click",".gf-shop-switch-layout li a",function(e){e.preventDefault();var i=t(this),o=i.data("layout"),n=i.closest(".gsf-product-wrap").find('[data-items-container="true"]'),s=i.closest(".gsf-product-wrap").find(".gf-paging");i.closest("li").hasClass("active")||a||(a=!0,i.closest(".gf-shop-switch-layout").children("li").removeClass("active"),i.closest("li").addClass("active"),s.fadeOut(),i.waypoint(function(){t(this.element).addClass("wpb_start_animation animated"),this.destroy()}),n.fadeOut(function(){"list"===o?n.removeClass("layout-grid").addClass("layout-list"):n.removeClass("layout-list").addClass("layout-grid"),G5_Core.util.tooltip(),n.fadeIn("slow"),s.fadeIn("slow")}),t.cookie("product_layout",o,{expires:15}),a=!1)})},processTabs:function(){t(".gsf-pretty-tabs").each(function(){var a=t(this);if(a.closest(".custom-product-row").length>0){var e=a.closest(".custom-product-row").find(".gf-heading");if(e.length>0){var o=e.find(".heading-title").outerWidth();i?a.css("margin-right",o+30):a.css("margin-left",o+30),a.gsfPrettyTabs()}}})},updateAjaxPosts:function(){var e=this;a.on("gf_pagination_ajax_success",function(a,i,o){"product"===i.settings.post_type&&(e.updateResultCount(t(a.target),i,o),t(a.target).imagesLoaded({background:!0},function(){t(a.target).trigger("gf_update_ajax_product",[i]),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown()}))})},updateResultCount:function(t,a,e){var i=t.find(".woocommerce-result-count"),o=e.find(".woocommerce-result-count");0!==i.length&&0!==o.length&&i.html(o.html())},addToWishlist:function(){t(document).on("click",".add_to_wishlist",function(){var a=t(this),e=a.parent().parent();if(!e.parent().hasClass("single-product-function")){a.addClass("added-spinner");var i=e.parent().parent().parent().parent();if(void 0===i)return;i.addClass("active")}}),a.on("added_to_wishlist",function(a,e,i,o){var n=t(".added-spinner.add_to_wishlist"),s=n.parent().parent();if(!s.parent().hasClass("single-product-function")){var r=s.parent().parent().parent().parent();if(void 0===r)return;setTimeout(function(){r.removeClass("active"),n.removeClass("added-spinner")},700)}})},addToCart:function(){t(document).on("click",".add_to_cart_button",function(){var a=t(this);if(!a.hasClass("single_add_to_cart_button")&&a.is(".product_type_simple")){var e=a.closest(".product-item-wrap");if(void 0===e)return;e.addClass("active")}}),a.on("wc_cart_button_updated",function(a,e){var i=t(".header-sticky-wrapper .header-sticky"),o=t(".item-shopping-cart",i);if(!e.hasClass("single_add_to_cart_button")){var n=e.parent(),s=n.find(".added_to_cart"),r=s.text(),c=n.closest(".product-item-wrap");e.remove(),s.html('<i class="fa fa-check"></i> '+r),setTimeout(function(){n.tooltip("hide").attr("title",r).tooltip("fixTitle")},500),setTimeout(function(){G5_Woocommerce.setCartScrollBar(function(){if(o.length>0){var t=0;i.hasClass("header-hidden")&&(i.removeClass("header-hidden"),t=500),setTimeout(function(){o.addClass("show-cart"),setTimeout(function(){o.removeClass("show-cart")},2e3)},t)}})},10),setTimeout(function(){c.removeClass("active")},700)}})},quickView:function(){var e=!1;t(document).on("click",".product-quick-view",function(i){if(i.preventDefault(),!e){e=!0;var o=t(this),n=o.data("product_id"),s="#popup-product-quick-view-wrapper",r=o.find("i"),c=r.attr("class"),d=o.parent().parent().parent().parent(),u=o,l=o.hasClass("prev-product")||o.hasClass("next-product");d.addClass("active"),u.addClass("active"),r.attr("class","fa fa-spinner fa-pulse"),t.ajax({url:g5plus_variable.ajax_url,data:{action:"product_quick_view",id:n},success:function(i){d.removeClass("active"),u.removeClass("active"),r.attr("class",c);var o=t(".modal-body",s);if(l){var n=t(".modal-content",s),f=t(".product-quickview-navigation",s);n.css({width:n.width(),height:n.height()}),o.fadeOut(function(){o.html(t(".modal-body",i).html()).fadeIn(),f.html(t(".product-quickview-navigation",i).html());var a=t(".quick-view-product-image",o);if(G5_Woocommerce.singleProductImage(a),void 0!==t.fn.wc_variation_form){var e=t(s).find(".variations_form"),r=t(s).find(".variations_form .variations select");e.wc_variation_form(),e.trigger("check_variations"),r.change()}t(s).addClass("in"),t(s).fadeIn(),setTimeout(function(){n.css({width:"",height:""})},1e3),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown(),t(n).find(".single-product-image-thumb a").off("click").on("click",function(t){t.preventDefault()})})}else{t(s).length&&t(s).remove(),a.append(i);var m=t(".quick-view-product-image",s);if(G5_Woocommerce.singleProductImage(m),void 0!==t.fn.wc_variation_form){var p=t(s).find(".variations_form"),h=t(s).find(".variations_form .variations select");p.wc_variation_form(),p.trigger("check_variations"),h.change()}t(s).modal(),G5_Core.util.tooltip(),G5_Woocommerce.saleCountdown(),t(s).find(".single-product-image-thumb a").off("click").on("click",function(t){t.preventDefault()})}G5_Woocommerce.addCartQuantity(),e=!1},error:function(t){e=!1}})}})},addCartQuantity:function(){t(document).off("click",".quantity .btn-number").on("click",".quantity .btn-number",function(a){a.preventDefault();var e=t(this).data("type"),i=t("input",t(this).parent()),o=parseFloat(i.val()),n=parseFloat(i.attr("max")),s=parseFloat(i.attr("min")),r=parseFloat(i.attr("step")),c=0;i.attr("step").indexOf(".")>0&&(c=i.attr("step").split(".")[1].length),isNaN(n)&&(n=100),isNaN(s)&&(s=0),isNaN(r)&&(r=1,c=0),isNaN(o)?i.val(s):("minus"==e&&(o>s&&(o=(o-r).toFixed(c),i.val(o).change()),parseFloat(i.val())<=s&&(i.val(s).change(),t(this).attr("disabled",!0))),"plus"==e&&(o<n&&(o=(o+r).toFixed(c),i.val(o).change()),parseFloat(i.val())>=n&&(i.val(n).change(),t(this).attr("disabled",!0))))}),t("input",".quantity").on("focusin",function(){t(this).data("oldValue",t(this).val())}),t("input",".quantity").on("change",function(){var a=t(this),e=parseFloat(a.attr("max")),i=parseFloat(a.attr("min")),o=parseFloat(a.val()),n=parseFloat(a.attr("step"));isNaN(e)&&(e=100),isNaN(i)&&(i=0),isNaN(n)&&(n=1);var s=t(".add_to_cart_button",t(this).parent().parent().parent());o>=i?(t(".btn-number[data-type='minus']",t(this).parent()).removeAttr("disabled"),void 0!==s&&s.attr("data-quantity",o)):(alert("Sorry, the minimum value was reached"),t(this).val(t(this).data("oldValue")),void 0!==s&&s.attr("data-quantity",t(this).data("oldValue"))),o<=e?(t(".btn-number[data-type='plus']",t(this).parent()).removeAttr("disabled"),void 0!==s&&s.attr("data-quantity",o)):(alert("Sorry, the maximum value was reached"),t(this).val(t(this).data("oldValue")),void 0!==s&&s.attr("data-quantity",t(this).data("oldValue")))})},setCartScrollBar:function(a){t(".cart_list.product_list_widget").perfectScrollbar({wheelSpeed:.5,suppressScrollX:!0}),a&&a()},singleProductImage:function(a){var o=a.find(".single-product-image-main"),n=o.find(".zoom-image"),s=o.find("img").attr("srcset",""),r=a.find(".single-product-image-thumb").addClass("hidden"),c=null;r.on("initialized.owl.carousel",function(t){r.find(".owl-item").eq(0).addClass("current"),setTimeout(function(){r.removeClass("hidden")},1e3)}).owlCarousel({items:5,nav:!1,dots:!1,rtl:i,lazyLoad:e,margin:10,responsive:{992:{items:5},768:{items:3}}}).on("changed.owl.carousel",function(a){var e=t(a.target).find('[data-index="'+a.item.index+'"]'),i=e.attr("data-large-image"),o=e.attr("href"),r=e.closest(".owl-item");t(a.target).find(".owl-item").removeClass("current"),r.addClass("current"),n.attr("href",o),null!=c&&clearTimeout(c),c=setTimeout(function(){s.stop().animate({opacity:0},function(){s.attr("src",i),s.imagesLoaded({src:!0},function(){s.animate({opacity:1}),G5_Core.util.magnificPopup()})})},200)}),r.on("mouseenter",".owl-item",function(a){if(a.preventDefault(),!t(this).hasClass("current")){var e=t(this).index(),i=t(this).find('[data-index="'+e+'"]'),o=i.attr("data-large-image"),r=i.attr("href");t(this).closest(".owl-carousel").find(".owl-item").removeClass("current"),t(this).addClass("current"),n.attr("href",r),null!=c&&clearTimeout(c),c=setTimeout(function(){s.stop().animate({opacity:0},function(){s.attr("src",o),s.imagesLoaded({src:!0},function(){s.animate({opacity:1}),G5_Core.util.magnificPopup()})})},200)}}),t(document).on("found_variation",function(a,e){if(void 0!==e&&void 0!==e.variation_id){var i=e.variation_id;t('a[data-variation_id*="|'+i+'|"]',r).closest(".owl-item").trigger("mouseenter")}}),t(document).on("reset_data",function(a){t('a[data-index="0"]',r).closest(".owl-item").trigger("mouseenter")})},saleCountdown:function(){function a(a,e){var i=parseInt(a.offset.seconds),o=parseInt(a.offset.minutes),n=parseInt(a.offset.hours),s=parseInt(a.offset.totalDays);s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),i<10&&(i="0"+i),t(".countdown-day",e).text(s),t(".countdown-hours",e).text(n),t(".countdown-minutes",e).text(o),t(".countdown-seconds",e).text(i)}t(".product-deal-countdown").each(function(){var e=t(this).data("date-end"),i=t(this);i.countdown(e,function(t){a(t,i)}).on("update.countdown",function(t){a(t,i)})}),G5_Woocommerce.saleCountdownWidth()},saleCountdownWidth:function(){t(".product-deal-countdown").each(function(){var a=0;t(this).removeClass("small"),t(".countdown-section",t(this)).each(function(){a+=t(this).outerWidth()+parseInt(t(this).css("margin-right").replace("px",""),10)}),a>t(this).outerWidth()&&t(this).addClass("small")})},yith_wcan_ajax_filtered:function(){t(document).on("yith-wcan-ajax-filtered",function(e,i){var o=a;"undefined"!=typeof yith_wcan&&void 0!==yith_wcan.container&&(o=t(yith_wcan.container)),new G5_Core_Animation(o),o.find(".gsf-pretty-tabs").gsfPrettyTabs({more_text:g5plus_variable.pretty_tabs_more_text}),G5_Core.lazyLoad.init(),G5_Core.off_canvas.init(),G5_Core.util.tooltip()})}},t(document).ready(function(){G5_Woocommerce.init()})}(jQuery);